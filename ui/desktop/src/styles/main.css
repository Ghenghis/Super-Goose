@import 'tailwindcss';
@import 'tw-animate-css';
@plugin '@tailwindcss/typography';

@source '../../index.html';
@source '../**/*.{js,ts,jsx,tsx}';

@theme {
  --breakpoint-md: 930px;
}

/* Cash Sans */

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --shadow-*: initial;

  --color-white: #ffffff;
  --color-black: #000000;

  --color-block-teal: #13bbaf;
  --color-block-orange: #ff4f00;

  --color-neutral-50: #f4f6f7;
  --color-neutral-100: #e3e6ea;
  --color-neutral-200: #cbd1d6;
  --color-neutral-300: #a7b0b9;
  --color-neutral-400: #878787;
  --color-neutral-500: #606c7a;
  --color-neutral-600: #525b68;
  --color-neutral-700: #474e57;
  --color-neutral-800: #3f434b;
  --color-neutral-900: #32353b;
  --color-neutral-950: #22252a;

  --color-red-100: #ff6b6b;
  --color-red-200: #f94b4b;

  --color-blue-100: #7cacff;
  --color-blue-200: #5c98f9;

  --color-green-100: #a3d795;
  --color-green-200: #91cb80;

  --color-yellow-100: #ffd966;
  --color-yellow-200: #fbcd44;

  --color-accent: var(--color-neutral-900);
}

:root {
  /* fonts */
  --font-sans: 'Cash Sans', sans-serif;
  --font-mono: monospace;

  /* theming accents */
  --background-accent: var(--color-accent);
  --border-accent: var(--color-accent);
  --text-accent: var(--color-accent);
  --text-on-accent: var(--color-white);

  /* Semantic */
  --background-default: var(--color-white);
  --background-muted: var(--color-neutral-50);
  --background-medium: var(--color-neutral-100);
  --background-inverse: var(--color-black);
  --background-danger: var(--color-red-200);
  --background-info: var(--color-blue-200);

  --border-default: var(--color-neutral-100);
  --border-strong: var(--color-neutral-100);
  --border-danger: var(--color-red-200);
  --border-info: var(--color-blue-200);

  --text-default: var(--color-neutral-800);
  --text-muted: var(--color-neutral-600);
  --text-inverse: var(--color-white);
  --text-danger: var(--color-red-200);
  --text-success: var(--color-green-200);
  --text-warning: var(--color-yellow-200);
  --text-info: var(--color-blue-200);

  --placeholder: var(--color-neutral-400);

  --ring: var(--border-strong);

  /* Search highlighting */
  --highlight-color: rgba(255, 213, 0, 0.5);
  --highlight-current: rgba(252, 213, 3, 0.6);

  --sidebar: var(--background-muted);
  --sidebar-foreground: var(--text-default);
  --sidebar-primary: var(--background-accent);
  --sidebar-primary-foreground: var(--text-inverse);
  --sidebar-accent: var(--background-muted);
  --sidebar-accent-foreground: var(--text-default);
  --sidebar-border: var(--border-default);
  --sidebar-ring: var(--border-default);

  /* custom shadow */

  --shadow-default:
    0px 12px 32px 0px rgba(0, 0, 0, 0.04), 0px 8px 16px 0px rgba(0, 0, 0, 0.02),
    0px 2px 4px 0px rgba(0, 0, 0, 0.04), 0px 0px 1px 0px rgba(0, 0, 0, 0.2);
}

.dark {
  /* theming accents */
  --background-accent: var(--color-white);
  --border-accent: var(--color-white);
  --text-accent: var(--color-white);
  --text-on-accent: var(--color-black);

  /* semantic */
  --background-default: var(--color-neutral-950);
  --background-muted: var(--color-neutral-800);
  --background-medium: var(--color-neutral-700);
  --background-inverse: var(--color-neutral-200);
  --background-danger: var(--color-red-100);
  --background-info: var(--color-blue-100);

  --border-default: var(--color-neutral-800);
  --border-strong: var(--color-neutral-600);
  --border-danger: var(--color-red-100);
  --border-info: var(--color-blue-100);

  --text-default: var(--color-white);
  --text-muted: var(--color-neutral-300);
  --text-inverse: var(--color-black);
  --text-danger: var(--color-red-100);
  --text-success: var(--color-green-100);
  --text-warning: var(--color-yellow-100);
  --text-info: var(--color-blue-100);

  --placeholder: var(--color-neutral-400);

  --ring: var(--border-strong);

  /* Search highlighting */
  --highlight-color: rgba(255, 213, 0, 0.5);
  --highlight-current: rgba(252, 213, 3, 0.6);

  --sidebar: var(--background-muted);
  --sidebar-foreground: var(--text-default);
  --sidebar-primary: var(--background-accent);
  --sidebar-primary-foreground: var(--text-inverse);
  --sidebar-accent: var(--background-muted);
  --sidebar-accent-foreground: var(--text-default);
  --sidebar-border: var(--border-default);
  --sidebar-ring: var(--border-default);

  --shadow-default:
    0px 12px 32px 0px rgba(0, 0, 0, 0.2), 0px 8px 16px 0px rgba(0, 0, 0, 0.15),
    0px 2px 4px 0px rgba(0, 0, 0, 0.1), 0px 0px 1px 0px rgba(0, 0, 0, 0.3);
}

/* ═══════════════════════════════════════════════════════════════════
   SUPER-GOOSE DESIGN TOKENS
   Applied only inside .super-goose-panel or [data-super="true"]
   Stock Goose components remain untouched.
   ═══════════════════════════════════════════════════════════════════ */

/* Super-Goose palette — scoped to Super features only */
.super-goose-panel,
[data-super="true"] {
  /* Backgrounds */
  --sg-bg: #080818;
  --sg-surface: #0a0a1f;
  --sg-card: #0f0f23;
  --sg-input: #1a1a2e;
  --sg-border: #1e293b;

  /* Brand & accent colors */
  --sg-gold: #fbbf24;
  --sg-indigo: #6366f1;
  --sg-emerald: #10b981;
  --sg-amber: #f59e0b;
  --sg-red: #ef4444;
  --sg-violet: #8b5cf6;
  --sg-sky: #0ea5e9;

  /* Text hierarchy */
  --sg-text-1: #f1f5f9;
  --sg-text-2: #cbd5e1;
  --sg-text-3: #94a3b8;
  --sg-text-4: #64748b;
  --sg-text-5: #475569;

  /* Docs / GitHub Pages accent */
  --sg-docs-green: #25c2a0;

  /* Gradients */
  --sg-gradient-gold: linear-gradient(135deg, #fbbf24, #f59e0b);
  --sg-gradient-indigo: linear-gradient(135deg, #6366f1, #8b5cf6);
  --sg-gradient-emerald: linear-gradient(135deg, #10b981, #059669);

  /* Shadows */
  --sg-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
  --sg-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
  --sg-shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.5);
  --sg-shadow-glow-gold: 0 0 20px rgba(251, 191, 36, 0.15);
  --sg-shadow-glow-indigo: 0 0 20px rgba(99, 102, 241, 0.15);
}

@theme inline {
  --ease-g2: cubic-bezier(0.55, 0, 1, 0.45);

  --color-background-default: var(--background-default);
  --color-background-muted: var(--background-muted);
  --color-background-medium: var(--background-medium);
  --color-background-inverse: var(--background-inverse);
  --color-background-danger: var(--background-danger);
  --color-background-info: var(--background-info);

  --color-background-accent: var(--background-accent);
  --color-border-accent: var(--border-accent);
  --color-text-accent: var(--text-accent);
  --color-text-on-accent: var(--text-on-accent);

  --color-border-default: var(--border-default);
  --color-border-strong: var(--border-strong);
  --color-border-danger: var(--border-danger);
  --color-border-info: var(--border-info);

  --color-text-default: var(--text-default);
  --color-text-muted: var(--text-muted);
  --color-text-inverse: var(--text-inverse);
  --color-text-danger: var(--text-danger);
  --color-text-warning: var(--text-warning);
  --color-text-info: var(--text-info);

  --font-sans: 'Cash Sans', sans-serif;
  --font-mono: monospace;
  --font-serif: serif;

  --color-ring: var(--ring);

  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);

  --shadow-default: var(--shadow-default);
}

@layer base {
  * {
    @apply border-border-default;
  }
  body {
    @apply text-text-default;
  }
}

/* Super-Goose utility classes */
.super-goose-panel .sg-card {
  background: var(--sg-card);
  border: 1px solid var(--sg-border);
  border-radius: 0.75rem;
  padding: 1rem;
}

.super-goose-panel .sg-card:hover {
  border-color: var(--sg-indigo);
  box-shadow: var(--sg-shadow-glow-indigo);
}

.super-goose-panel .sg-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
}

.super-goose-panel .sg-badge-gold {
  background: rgba(251, 191, 36, 0.15);
  color: var(--sg-gold);
  border: 1px solid rgba(251, 191, 36, 0.3);
}

.super-goose-panel .sg-badge-emerald {
  background: rgba(16, 185, 129, 0.15);
  color: var(--sg-emerald);
  border: 1px solid rgba(16, 185, 129, 0.3);
}

.super-goose-panel .sg-badge-red {
  background: rgba(239, 68, 68, 0.15);
  color: var(--sg-red);
  border: 1px solid rgba(239, 68, 68, 0.3);
}

.super-goose-panel .sg-badge-violet {
  background: rgba(139, 92, 246, 0.15);
  color: var(--sg-violet);
  border: 1px solid rgba(139, 92, 246, 0.3);
}

.super-goose-panel .sg-badge-sky {
  background: rgba(14, 165, 233, 0.15);
  color: var(--sg-sky);
  border: 1px solid rgba(14, 165, 233, 0.3);
}

.super-goose-panel .sg-badge-amber {
  background: rgba(245, 158, 11, 0.15);
  color: var(--sg-amber);
  border: 1px solid rgba(245, 158, 11, 0.3);
}

.super-goose-panel .sg-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.15s ease;
  cursor: pointer;
  border: none;
}

.super-goose-panel .sg-btn-primary {
  background: var(--sg-indigo);
  color: white;
}

.super-goose-panel .sg-btn-primary:hover {
  background: #4f46e5;
  box-shadow: var(--sg-shadow-glow-indigo);
}

.super-goose-panel .sg-btn-gold {
  background: var(--sg-gradient-gold);
  color: #000;
}

.super-goose-panel .sg-btn-gold:hover {
  box-shadow: var(--sg-shadow-glow-gold);
}

.super-goose-panel .sg-btn-ghost {
  background: transparent;
  color: var(--sg-text-2);
  border: 1px solid var(--sg-border);
}

.super-goose-panel .sg-btn-ghost:hover {
  background: var(--sg-input);
  color: var(--sg-text-1);
}

.super-goose-panel .sg-status-dot {
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 50%;
  display: inline-block;
}

.super-goose-panel .sg-status-active {
  background: var(--sg-emerald);
  box-shadow: 0 0 6px rgba(16, 185, 129, 0.4);
}

.super-goose-panel .sg-status-warning {
  background: var(--sg-amber);
  box-shadow: 0 0 6px rgba(245, 158, 11, 0.4);
}

.super-goose-panel .sg-status-error {
  background: var(--sg-red);
  box-shadow: 0 0 6px rgba(239, 68, 68, 0.4);
}

.super-goose-panel .sg-status-idle {
  background: var(--sg-text-4);
}

/* Super-Goose sidebar nav */
.super-goose-panel .sg-sidebar {
  width: 4rem;
  background: var(--sg-bg);
  border-right: 1px solid var(--sg-border);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1rem 0;
  gap: 0.5rem;
}

.super-goose-panel .sg-sidebar-item {
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.5rem;
  color: var(--sg-text-3);
  cursor: pointer;
  transition: all 0.15s ease;
}

.super-goose-panel .sg-sidebar-item:hover {
  background: var(--sg-input);
  color: var(--sg-text-1);
}

.super-goose-panel .sg-sidebar-item.active {
  background: rgba(99, 102, 241, 0.15);
  color: var(--sg-indigo);
}

/* Section headers */
.super-goose-panel .sg-section-label {
  font-size: 0.625rem;
  font-weight: 600;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--sg-text-4);
  padding: 0 1rem;
  margin-bottom: 0.5rem;
}

/* Progress bar */
.super-goose-panel .sg-progress {
  width: 100%;
  height: 0.375rem;
  background: var(--sg-input);
  border-radius: 9999px;
  overflow: hidden;
}

.super-goose-panel .sg-progress-bar {
  height: 100%;
  border-radius: 9999px;
  transition: width 0.3s ease;
}

/* Tab bar */
.super-goose-panel .sg-tabs {
  display: flex;
  gap: 0;
  border-bottom: 1px solid var(--sg-border);
}

.super-goose-panel .sg-tab {
  padding: 0.5rem 1rem;
  font-size: 0.8125rem;
  color: var(--sg-text-3);
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.15s ease;
}

.super-goose-panel .sg-tab:hover {
  color: var(--sg-text-1);
}

.super-goose-panel .sg-tab.active {
  color: var(--sg-indigo);
  border-bottom-color: var(--sg-indigo);
}

/* ────────────────────────────────────────────────────────────────────────────
   Panel System — Resize Handles, Transitions, Zone Animations
   ──────────────────────────────────────────────────────────────────────────── */

/* Resize handle base */
[data-panel-group-direction="horizontal"] > [data-resize-handle] {
  width: 1px;
  background: var(--border-default, hsl(var(--border)));
  transition: width 150ms ease, background-color 150ms ease, box-shadow 150ms ease;
  cursor: col-resize;
}

[data-panel-group-direction="vertical"] > [data-resize-handle] {
  height: 1px;
  background: var(--border-default, hsl(var(--border)));
  transition: height 150ms ease, background-color 150ms ease, box-shadow 150ms ease;
  cursor: row-resize;
}

/* Resize handle hover glow */
[data-panel-group-direction="horizontal"] > [data-resize-handle]:hover,
[data-panel-group-direction="horizontal"] > [data-resize-handle][data-resize-handle-active] {
  width: 4px;
  background: var(--sg-indigo, #6366f1);
  box-shadow: 0 0 8px rgba(99, 102, 241, 0.4);
}

[data-panel-group-direction="vertical"] > [data-resize-handle]:hover,
[data-panel-group-direction="vertical"] > [data-resize-handle][data-resize-handle-active] {
  height: 4px;
  background: var(--sg-indigo, #6366f1);
  box-shadow: 0 0 8px rgba(99, 102, 241, 0.4);
}

/* Panel zone transitions */
[data-testid="left-zone"],
[data-testid="center-zone"],
[data-testid="right-zone"],
[data-testid="bottom-zone"] {
  transition: opacity 200ms ease;
}

/* Panel header */
[data-panel-id] > div:first-child {
  transition: background-color 150ms ease;
}

/* Bottom zone tab active indicator */
[data-testid="bottom-zone"] button[class*="border-text-default"] {
  position: relative;
}

/* Status bar styling */
[data-testid="status-bar"] {
  font-size: 11px;
  letter-spacing: 0.01em;
}

/* Lock mode — hide resize handles completely */
.layout-locked [data-resize-handle] {
  width: 1px !important;
  height: 1px !important;
  cursor: default !important;
  pointer-events: none;
  opacity: 0.3;
}

/* Fade-in animation for panels appearing */
@keyframes sg-panel-fade-in {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}

.sg-panel-enter {
  animation: sg-panel-fade-in 200ms ease-out;
}

/* Smooth collapse animation */
@keyframes sg-collapse {
  from { max-height: 400px; opacity: 1; }
  to { max-height: 0; opacity: 0; }
}

@keyframes sg-expand {
  from { max-height: 0; opacity: 0; }
  to { max-height: 400px; opacity: 1; }
}

@keyframes sg-pulse-kf {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.super-goose-panel .sg-pulse {
  animation: sg-pulse-kf 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Panel toolbar dropdown backdrop */
[data-testid="status-bar"] .absolute {
  backdrop-filter: blur(8px);
}

/* Super-Goose panel system overrides — scoped */
[data-super="true"] [data-resize-handle]:hover,
[data-super="true"] [data-resize-handle][data-resize-handle-active] {
  background: var(--sg-gold, #fbbf24);
  box-shadow: 0 0 8px rgba(251, 191, 36, 0.4);
}

@font-face {
  font-family: 'Cash Sans';
  src:
    url(https://cash-f.squarecdn.com/static/fonts/cashsans/woff2/CashSans-Light.woff2)
      format('woff2'),
    url(https://cash-f.squarecdn.com/static/fonts/cashsans/woff/CashSans-Light.woff) format('woff');
  font-weight: 300;
  font-style: normal;
}

@font-face {
  font-family: 'Cash Sans';
  src:
    url(https://cash-f.squarecdn.com/static/fonts/cashsans/woff2/CashSans-Regular.woff2)
      format('woff2'),
    url(https://cash-f.squarecdn.com/static/fonts/cashsans/woff/CashSans-Regular.woff)
      format('woff');
  font-weight: 400;
  font-style: normal;
}

@font-face {
  font-family: 'Cash Sans';
  src:
    url(https://cash-f.squarecdn.com/static/fonts/cashsans/woff2/CashSans-Medium.woff2)
      format('woff2'),
    url(https://cash-f.squarecdn.com/static/fonts/cashsans/woff/CashSans-Medium.woff) format('woff');
  font-weight: 500;
  font-style: normal;
}

@font-face {
  font-family: 'Cash Sans';
  src:
    url(https://cash-f.squarecdn.com/static/fonts/cashsans/woff2/CashSans-Bold.woff2)
      format('woff2'),
    url(https://cash-f.squarecdn.com/static/fonts/cashsans/woff/CashSans-Bold.woff) format('woff');
  font-weight: 700;
  font-style: normal;
}

/* animations */
@keyframes appear {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fade-slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes sidebar-item-in {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes wind {
  0% {
    transform: translate(0, 0);
  }
  99.99% {
    transform: translate(-100%, 100%);
  }
  100% {
    transform: translate(0, 0);
  }
}

/* Non-blocking sidebar animations */
.sidebar-item {
  /* Start hidden and positioned to the right */
  opacity: 0;
  transform: translateX(20px);
  animation: sidebar-item-in 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  /* Use will-change sparingly and remove after animation */
  will-change: transform, opacity;
  animation-fill-mode: forwards;
}

.sidebar-item:nth-child(1) {
  animation-delay: 0.05s;
}
.sidebar-item:nth-child(2) {
  animation-delay: 0.2s;
}
.sidebar-item:nth-child(3) {
  animation-delay: 0.4s;
}
.sidebar-item:nth-child(4) {
  animation-delay: 0.45s;
}
.sidebar-item:nth-child(5) {
  animation-delay: 0.5s;
}
.sidebar-item:nth-child(6) {
  animation-delay: 0.25s;
}
.sidebar-item:nth-child(7) {
  animation-delay: 0.5s;
}

/* Merged: animation-fill-mode combined with initial .sidebar-item definition above */

@media (prefers-reduced-motion: reduce) {
  .sidebar-item {
    animation: none;
    opacity: 1;
    transform: none;
  }
}

/* Global reduced motion support - applies when user has system preference set */
@media (prefers-reduced-motion: reduce) {
  /* Disable all CSS animations and transitions, except for toasts which need transitions for auto-dismiss */
  *:not(.Toastify *),
  *:not(.Toastify *)::before,
  *:not(.Toastify *)::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Specific animation classes that should be disabled */
  .animate-shimmer,
  .animate-spin,
  .animate-pulse,
  .animate-bounce,
  [class*='animate-']:not(.Toastify *) {
    animation: none !important;
  }

  /* Page transitions */
  .page-transition {
    animation: none !important;
    opacity: 1 !important;
  }

  /* Goose icon entrance animation */
  .goose-icon-entrance {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }

  /* Wind/rain animation in welcome logo */
  [class*='animate-[wind'] {
    animation: none !important;
  }

  /* Elements that use opacity-0 with appear animation need to be visible when animations are disabled */
  .opacity-0[class*='animate-'] {
    opacity: 1 !important;
  }
}

/* Toast close button styling */
.Toastify__close-button {
  color: var(--text-inverse) !important;
  opacity: 0.7;
  align-self: center;
  margin-top: 0;
  margin-right: 8px;
  padding: 4px;
  border-radius: 4px;
  transition:
    opacity 0.2s ease,
    background-color 0.2s ease;
}

.Toastify__close-button:hover {
  opacity: 1;
  background-color: rgba(255, 255, 255, 0.1);
}

.Toastify__close-button:focus {
  outline: 2px solid var(--color-block-teal);
  outline-offset: 2px;
}

/* Ensure close button is visible on all toast types */
.Toastify__toast--success .Toastify__close-button,
.Toastify__toast--error .Toastify__close-button,
.Toastify__toast--info .Toastify__close-button,
.Toastify__toast--warning .Toastify__close-button,
.Toastify__toast--default .Toastify__close-button {
  color: var(--text-inverse) !important;
}

.animate-fade-slide-up {
  animation: fade-slide-up 0.15s ease-out forwards;
}

/* Hide native scrollbars in Radix ScrollArea (custom scrollbar will show instead) */
[data-radix-scroll-area-viewport] {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}

/* Override Radix UI ScrollArea styles */
[data-radix-scroll-area-viewport] > div {
  display: block !important;
}

/* Native scrollbar styling */
* {
  scrollbar-width: auto;
  scrollbar-color: var(--color-neutral-200) transparent;
}

.dark * {
  scrollbar-color: var(--color-neutral-400) transparent;
}

/* Webkit scrollbar styles */
::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 12px; /* Increased from 8px */
  height: 12px;
  background-color: transparent;
}

::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 0;
}

::-webkit-scrollbar-thumb {
  background-color: var(--color-neutral-200);
  border: 3px solid transparent; /* Creates padding effect */
  border-radius: 8px;
  background-clip: padding-box;
  min-height: 40px; /* Minimum height of thumb */
}

.dark ::-webkit-scrollbar-thumb {
  background-color: var(--color-neutral-400);
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-neutral-300);
  border: 2px solid transparent; /* Slightly less padding on hover */
}

.dark ::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-neutral-500);
}

/* Ensure the thumb is more prominent when active */
::-webkit-scrollbar-thumb:active {
  background-color: var(--color-neutral-400);
  border: 2px solid transparent;
}

.dark ::-webkit-scrollbar-thumb:active {
  background-color: var(--color-neutral-500);
}

/* Duplicate scrollbar styles removed - consolidated above */

body {
  background-color: var(--background-default);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}

.word-break {
  overflow-wrap: break-word;
  word-wrap: break-word;
  word-break: break-word;
}

.titlebar-drag-region {
  -webkit-app-region: drag;
  height: 32px;
  width: 100%;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 50;
}

.no-drag {
  -webkit-app-region: no-drag;
}

.bg-inline-code {
  border-radius: 4px;
  color: var(--color-neutral-200);
  font-family: monospace;
  font-size: 12px;
  font-style: normal;
  font-weight: 400;
  line-height: normal;
}

.bg-inline-code:before {
  content: '';
}

pre:has(> code.bg-inline-code) {
  padding: 1em;
}

li > code.bg-inline-code,
p > code.bg-inline-code {
  color: var(--color-block-orange);
  padding: 2px 4px;
}

.bg-inline-code:after {
  content: '';
}

.user-message p {
  margin-bottom: 0 !important;
}

.scrollbar-thin {
  scrollbar-width: thin;
}

.assistant:has(+ .user):not(.in-chain) .goose-message {
  padding-bottom: 24px;
}

/* Sidebar scrollbar styles */
.sidebar-scrollbar {
  scrollbar-gutter: stable;
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}

.dark .sidebar-scrollbar {
  scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

.sidebar-scrollbar::-webkit-scrollbar {
  width: 6px;
  position: absolute;
  right: 0;
}

.sidebar-scrollbar::-webkit-scrollbar-track {
  background: transparent;
  margin: 8px 0;
}

.sidebar-scrollbar::-webkit-scrollbar-thumb {
  background-color: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
  border: none;
}

.dark .sidebar-scrollbar::-webkit-scrollbar-thumb {
  background-color: rgba(255, 255, 255, 0.2);
}

.sidebar-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: rgba(0, 0, 0, 0.3);
}

.dark .sidebar-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: rgba(255, 255, 255, 0.3);
}

/* Virtualized list styles */
.virtualized-list {
  scrollbar-width: thin;
  scrollbar-color: var(--color-neutral-300) transparent;
}

.virtualized-list::-webkit-scrollbar {
  width: 8px;
}

.virtualized-list::-webkit-scrollbar-track {
  background: transparent;
}

.virtualized-list::-webkit-scrollbar-thumb {
  background-color: var(--color-neutral-300);
  border-radius: 4px;
}

.dark .virtualized-list::-webkit-scrollbar-thumb {
  background-color: var(--color-neutral-400);
}

.virtualized-list::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-neutral-400);
}

.dark .virtualized-list::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-neutral-300);
}

/* Ensure virtualized items don't have margin/padding that could break layout */
.virtualized-list > div {
  outline: none;
}

/* Optimize performance for virtualized rendering */
.virtualized-list * {
  contain: layout style paint;
}

/* Goose icon animation to replace framer-motion */
@keyframes goose-icon-entrance {
  from {
    opacity: 0;
    transform: scale(0.25) translate(-5px, 5px) rotate(-20deg);
  }
  to {
    opacity: 1;
    transform: scale(1) translate(0, 0) rotate(0deg);
  }
}

.goose-icon-animation {
  animation: goose-icon-entrance 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  transform-origin: bottom left;
}

/* Optimize session skeleton loading */
.session-skeleton {
  contain: layout style paint;
  /* Prevent layout thrashing during loading */
  min-height: 140px;
}

/* Ensure navigation is always responsive */
[data-slot='sidebar-menu-button'] {
  /* Ensure buttons are always clickable during transitions */
  pointer-events: auto !important;
  /* Optimize for interaction */
  touch-action: manipulation;
}

/* Ensure all navigation buttons are immediately responsive */
.sidebar-item button,
.sidebar-item a,
[data-slot='sidebar-menu-button'] {
  pointer-events: auto !important;
  /* Prevent any blocking during animations */
  will-change: auto;
}

/* Override any blocking pointer events during animations */
.sidebar-item,
.sidebar-item * {
  pointer-events: auto !important;
}

/* Optimize route transitions for better performance */
.route-container {
  /* Use hardware acceleration for smoother transitions */
  transform: translateZ(0);
  backface-visibility: hidden;
  /* Optimize for content changes */
  contain: layout style paint;
}

/* Non-blocking page transitions */
@keyframes page-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.page-transition {
  /* Start with proper initial state to prevent flicker */
  opacity: 0;
  animation: page-fade-in 0.08s ease-out forwards;
  /* Don't block interactions during animation */
  pointer-events: auto;
}

/* Sidebar transition optimizations */
[data-slot='sidebar-container'] {
  /* Promote to composite layer for smoother animations */
  transform: translateZ(0);
  backface-visibility: hidden;
  /* Optimize for transform animations */
  will-change: transform;
}

[data-slot='sidebar-gap'] {
  /* Optimize for width animations */
  will-change: width;
}

/* Remove will-change when not transitioning to save memory */
[data-state='expanded'] [data-slot='sidebar-container'],
[data-state='collapsed'] [data-slot='sidebar-container'] {
  will-change: auto;
}

[data-state='expanded'] [data-slot='sidebar-gap'],
[data-state='collapsed'] [data-slot='sidebar-gap'] {
  will-change: auto;
}

/* Ensure smooth transitions during state changes */
[data-state='expanded'] [data-slot='sidebar-container'],
[data-state='collapsed'] [data-slot='sidebar-container'] {
  will-change: transform;
}

[data-state='expanded'] [data-slot='sidebar-gap'],
[data-state='collapsed'] [data-slot='sidebar-gap'] {
  will-change: width;
}

/* Subtle back-and-forth shimmer animation for onboarding card */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
    opacity: 0;
  }
  20% {
    opacity: 0.15;
  }
  50% {
    transform: translateX(100%);
    opacity: 0.05;
  }
  80% {
    opacity: 0.15;
  }
  100% {
    transform: translateX(-100%);
    opacity: 0;
  }
}

.animate-shimmer {
  animation: shimmer 6s ease-in-out infinite;
}

/* KaTeX Math Rendering */

.prose .katex {
  font-size: 1.05em;
  color: inherit;
}

.katex-display {
  margin: 0.75em 0;
  padding: 1em;
  background-color: var(--background-muted);
  border: 1px solid var(--border-default);
  border-radius: 6px;
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-width: thin;
  text-align: center;
}

.katex-display .katex {
  color: var(--color-neutral-800);
}

.dark .katex-display .katex {
  color: #e6e6e6;
}

.katex-error {
  color: var(--text-danger);
}

/* Search Highlighting Styles */
.search-highlight {
  background-color: var(--highlight-color);
  color: var(--text-default);
  padding: 0;
  border-radius: 2px;
}

.search-highlight.current {
  background-color: var(--highlight-current);
  box-shadow: inset 0 0 0 1px var(--text-default);
  z-index: 2;
}

/* Search Bar Animations */
@keyframes expandDown {
  from {
    max-height: 0;
  }
  to {
    max-height: var(--search-bar-height);
  }
}

@keyframes collapseUp {
  from {
    max-height: var(--search-bar-height);
  }
  to {
    max-height: 0;
  }
}

.search-bar-enter {
  --search-bar-height: 72px;
  animation: expandDown 0.15s ease-out forwards;
  overflow: hidden;
}

.search-bar-exit {
  --search-bar-height: 72px;
  animation: collapseUp 0.15s ease-out forwards;
  overflow: hidden;
}

/* Reduced motion support for search animations */
@media (prefers-reduced-motion: reduce) {
  .search-bar-enter,
  .search-bar-exit {
    animation: none;
    max-height: var(--search-bar-height);
  }
}
